<!--
 * @Author: Angra Mainyu
 * @Date: 2018-12-30 17:48:56
 * @LastEditors: Angra Mainyu
 * @LastEditTime: 2018-12-30 21:39:16
 * @Description: file content
 -->
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../css/font.css">
    <link rel="stylesheet" href="../css/xadmin.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="../lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/xadmin.js"></script>
</head>

<body>
    <div class="x-body">
        <form class="layui-form layui-form-pane" action="">
            <div class="layui-form-item">
                <label class="layui-form-label">订单号</label>
                <div class="layui-input-block">
                    <input type="text" name="iid" autocomplete="off" class="layui-input" id="edit-ord-id" disabled>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>货物名</label>
                <div class="layui-input-block">
                    <input type="text" name="name" required lay-verify="required" autocomplete="off" class="layui-input"
                        id="edit-name" disabled>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>ID</label>
                <div class="layui-input-block">
                    <input type="text" name="id" required lay-verify="required|number" autocomplete="off" class="layui-input"
                        id="edit-id" disabled>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>单价</label>
                <div class="layui-input-block">
                    <input type="text" name="price" required lay-verify="required|number" autocomplete="off" class="layui-input"
                        id="edit-price" disabled>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>数量</label>
                <div class="layui-input-block">
                    <input type="text" name="count" required lay-verify="required|number" autocomplete="off" class="layui-input"
                        id="edit-count" disabled>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>总价</label>
                <div class="layui-input-block">
                    <input type="text" name="total" required lay-verify="required|number" autocomplete="off" class="layui-input"
                        id="edit-total" disabled>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>经手人</label>
                <div class="layui-input-block">
                    <input type="text" name="manager" required lay-verify="required" autocomplete="off" class="layui-input"
                        id="edit-manager" disabled>
                </div>
            </div>
            <!-- <div class="layui-input-block">
                <div class="layui-form-item">
                    <button class="layui-btn" lay-submit lay-filter="edit-sumbit">立即提交</button>
                </div>
            </div> -->
        </form>
    </div>
</body>
<script>
    layui.use(['form', 'layer'], function () {
        var form = layui.form;
        var layer = layui.layer;
        //监听提交
        form.on('submit(edit-sumbit)', function (data) {
            console.log(data);
            // 向服务器提交表单
            // $.post(
            //     url = 'storage-input.php',
            //     data = {
            //         token: "secret",
            //         action: "insert",
            //         table: "input",
            //         data: JSON.stringify(data.field)
            //     },
            //     function (res) {
            //         console.log(res);
            //         layer.msg(JSON.stringify(res));
            //         res = JSON.parse(res);
            //         if (res["code"] == 1) {
            //             layer.alert("添加成功", { icon: 6 }, function () {
            //                 // 获得frame索引
            //                 var index = parent.layer.getFrameIndex(window.name);
            //                 //关闭当前frame
            //                 parent.layer.close(index);
            //                 parent.layui.table.reload('storage_input', { page: { curr: 1 } });
            //             });
            //         }
            //         else {
            //             layer.alert('添加失败', { icon: 1 });
            //         }
            //         var index = parent.layer.getFrameIndex(window.name);
            //         parent.layer.close(index);
            //     }
            // );
            layer.msg(JSON.stringify(data.field));
            return false;
        });
    });

    window.onload = function () {
        setTimeout("get_item_id", 2000);
    }


    function getTotal() {
        var total = $("#edit-price").val() * $("#edit-count").val();
        $("#edit-total").val(total);
    }

    function get_item_id() {
        var name = $('#edit-name').val();
        $.post(
            url = 'storage-id.php',
            data = {
                token: "secret",
                action: "get_item_id",
                name: name
            },
            function (data) {
                console.log(data);
                $('#edit-id').val(data);
            }
        )
    }
</script>

</html>